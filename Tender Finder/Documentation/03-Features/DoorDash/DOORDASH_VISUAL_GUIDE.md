# Visual Integration Guide

## ğŸ¨ Button Layout in ChatDetailView

### Before (3 buttons)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                             â”‚
â”‚   Restaurant Photo                          â”‚
â”‚                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚   Restaurant Name                           â”‚
â”‚   â­â­â­â­â­ 4.5 (250 reviews)               â”‚
â”‚   ğŸ´ Fast Food         $$                   â”‚
â”‚                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚  ğŸ“ â”‚    â”‚  ğŸ§­ â”‚    â”‚  ğŸ“¤ â”‚           â”‚
â”‚   â”‚Call â”‚    â”‚Dirs â”‚    â”‚Shareâ”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### After (4 buttons - DoorDash added)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                             â”‚
â”‚   Restaurant Photo                          â”‚
â”‚                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚   Restaurant Name                           â”‚
â”‚   â­â­â­â­â­ 4.5 (250 reviews)               â”‚
â”‚   ğŸ´ Fast Food         $$                   â”‚
â”‚                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”          â”‚
â”‚   â”‚ ğŸ“ â”‚  â”‚ ğŸ›ï¸ â”‚  â”‚ ğŸ§­ â”‚  â”‚ ğŸ“¤ â”‚          â”‚
â”‚   â”‚Callâ”‚  â”‚Ordrâ”‚  â”‚Dirsâ”‚  â”‚Shr â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”˜          â”‚
â”‚            â†‘                                â”‚
â”‚         NEW!                                â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ Button Visual Specs

### DoorDash Button Details
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚    â”‚         â”‚      â”‚  Circle: 60x60
â”‚    â”‚  ğŸ›ï¸     â”‚      â”‚  Color: DoorDash red gradient
â”‚    â”‚         â”‚      â”‚  Icon: bag.fill
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                     â”‚
â”‚      Order          â”‚  Label: "Order"
â”‚                     â”‚  Font: Caption
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Color Breakdown
```
DoorDash Red Gradient:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ #FF3008            â”‚ â† Top color
â”‚     â†“              â”‚
â”‚ #E60A00            â”‚ â† Bottom color
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RGB Values:
Top:    (255, 48, 8)
Bottom: (230, 10, 0)
```

---

## ğŸ“± User Flow

### Flow Diagram
```
User opens restaurant detail
         â†“
Sees "Order" button (red, with bag icon)
         â†“
Taps button
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ iOS checks  â”‚
    â”‚ DoorDash    â”‚
    â”‚ installed?  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
   Yes       No
    â”‚         â”‚
    â†“         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚ Open â”‚  â”‚ Open â”‚
â”‚ App  â”‚  â”‚ Web  â”‚
â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜
    â”‚         â”‚
    â†“         â†“
Search for restaurant in DoorDash
```

---

## ğŸ“‚ File Structure

### Project Layout
```
Cluck/
â”œâ”€â”€ ChatDetailView.swift â† Modified (DoorDash button added)
â”œâ”€â”€ DeliveryService.swift â† NEW (handles deep linking)
â”œâ”€â”€ ContentView.swift
â”œâ”€â”€ RootView.swift
â”œâ”€â”€ SwipeDeckView.swift
â”œâ”€â”€ SavedListView.swift
â”œâ”€â”€ TenderCardView.swift
â”œâ”€â”€ EmptyStateView.swift
â”œâ”€â”€ Models/
â”‚   â”œâ”€â”€ Tender.swift
â”‚   â””â”€â”€ FavoriteRestaurant.swift
â”œâ”€â”€ ViewModels/
â”‚   â””â”€â”€ TenderDeckViewModel.swift
â”œâ”€â”€ Services/
â”‚   â”œâ”€â”€ RestaurantSearchService.swift
â”‚   â”œâ”€â”€ LocationManager.swift
â”‚   â””â”€â”€ DeliveryService.swift â† NEW
â””â”€â”€ Resources/
    â””â”€â”€ Info.plist â† MUST ADD: LSApplicationQueriesSchemes
```

---

## ğŸ”§ Info.plist Visual Guide

### Before
```xml
<plist version="1.0">
<dict>
    <key>CFBundleDisplayName</key>
    <string>Cluck</string>
    
    <key>NSLocationWhenInUseUsageDescription</key>
    <string>We need your location to find restaurants nearby</string>
    
    <!-- Other keys... -->
</dict>
</plist>
```

### After (ADD THIS)
```xml
<plist version="1.0">
<dict>
    <key>CFBundleDisplayName</key>
    <string>Cluck</string>
    
    <key>NSLocationWhenInUseUsageDescription</key>
    <string>We need your location to find restaurants nearby</string>
    
    <!-- â¬‡ï¸ ADD THIS SECTION â¬‡ï¸ -->
    <key>LSApplicationQueriesSchemes</key>
    <array>
        <string>doordash</string>
    </array>
    <!-- â¬†ï¸ ADD THIS SECTION â¬†ï¸ -->
    
    <!-- Other keys... -->
</dict>
</plist>
```

---

## ğŸ¯ Button Positioning

### Code Structure in ChatDetailView
```swift
ScrollView {
    VStack {
        // Hero Image (350pt tall)
        
        VStack {
            // Restaurant Name
            // Star Rating
            // Type & Price
            // Open/Closed Badge
            
            Divider()
            
            // â¬‡ï¸ ACTION BUTTONS HERE â¬‡ï¸
            HStack(spacing: 20) {
                if let phoneNumber { CallButton }
                DoorDashButton â† NEW!
                DirectionsButton
                ShareButton
            }
            // â¬†ï¸ ACTION BUTTONS HERE â¬†ï¸
            
            Divider()
            
            // Address
            // Photos
            // Website
            // Save/Unsave
        }
    }
}
```

---

## ğŸ”„ URL Flow Diagram

### DoorDash Deep Linking
```
User taps "Order" button
         â†“
DeliveryService.openDoorDash(restaurantName: "Popeyes")
         â†“
Encode restaurant name
"Popeyes" â†’ "Popeyes" (already valid)
"Raising Cane's" â†’ "Raising%20Cane's"
         â†“
Create app URL
doordash://search?query=Popeyes
         â†“
Check if can open
UIApplication.shared.canOpenURL(appURL)
         â†“
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
   Yes        No
    â”‚          â”‚
    â†“          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Open appâ”‚ â”‚Open webâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚          â”‚
    â†“          â†“
doordash://   https://doordash.com/
search?       search/store/
query=...     Popeyes/
```

---

## ğŸ¨ Color Palette Reference

### Current App Colors
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Primary Gradient                 â”‚
â”‚ #FF4C33 â†’ #FFCC99                â”‚ â† App branding
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Action Buttons                   â”‚
â”‚ ğŸ“ Blue:   #007AFF                â”‚ â† Call
â”‚ ğŸ›ï¸ Red:    #FF3008                â”‚ â† DoorDash (NEW)
â”‚ ğŸ§­ Green:  #34C759                â”‚ â† Directions
â”‚ ğŸ“¤ Orange: #FF9500                â”‚ â† Share
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Future Delivery Services
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DoorDash:  #FF3008               â”‚ â† Implemented
â”‚ Uber Eats: #06C167               â”‚ â† Ready
â”‚ Grubhub:   #F63440               â”‚ â† Ready
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Responsive Layout

### Button Sizing
```
Phone Size      Spacing    Button Size
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
iPhone SE       16pt       55x55
iPhone 14       20pt       60x60  â† Default
iPhone 14 Plus  20pt       60x60
iPad            24pt       70x70
```

### Adaptive Spacing
The buttons use:
- `spacing: 20` in HStack
- Automatically centers if odd number of buttons
- Maintains consistent sizing across devices

---

## ğŸ§ª Testing Scenarios

### Scenario 1: Fresh Install (No DoorDash)
```
1. Install Cluck
2. Open restaurant detail
3. Tap Order button
   â†“
Result: Safari opens â†’ DoorDash website
```

### Scenario 2: DoorDash Installed
```
1. Install DoorDash from App Store
2. Open Cluck
3. Tap Order button
   â†“
Result: DoorDash app opens â†’ Search results
```

### Scenario 3: After Uninstalling DoorDash
```
1. Have used DoorDash app before
2. Uninstall DoorDash
3. Tap Order button
   â†“
Result: Fallback to web (no error)
```

---

## ğŸ’¡ Implementation Highlights

### Smart Fallback Logic
```swift
// 1. Try app first
if UIApplication.shared.canOpenURL(appURL) {
    UIApplication.shared.open(appURL)
} else {
    // 2. Automatic web fallback
    openDoorDashWeb(restaurantName: name)
}
```

### URL Encoding Safety
```swift
// Handles special characters automatically
guard let encoded = name.addingPercentEncoding(
    withAllowedCharacters: .urlQueryAllowed
) else { return }

// Examples:
// "Popeyes" â†’ "Popeyes"
// "Raising Cane's" â†’ "Raising%20Cane's"
// "Chicken & Waffles" â†’ "Chicken%20%26%20Waffles"
```

---

## ğŸ¯ Quick Reference Card

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DoorDash Integration Quick Reference        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Service:    DeliveryService.swift           â”‚
â”‚ Method:     openDoorDash(restaurantName:)   â”‚
â”‚ Button:     ChatDetailView action buttons   â”‚
â”‚ Color:      #FF3008 (DoorDash red)          â”‚
â”‚ Icon:       bag.fill                        â”‚
â”‚ Label:      "Order"                         â”‚
â”‚ Required:   LSApplicationQueriesSchemes     â”‚
â”‚             in Info.plist                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Test:       Tap button â†’ DoorDash opens     â”‚
â”‚ Fallback:   Opens web if app not installed â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Visual Guide Version:** 1.0
**Last Updated:** January 8, 2026
**Corresponds to:** DoorDash Integration v1.0
